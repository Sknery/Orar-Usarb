#!/bin/bash

# Скрипт для рекурсивного обхода папки frontend и вывода содержимого
# всех релевантных файлов с кодом В ЕДИНЫЙ ТЕКСТОВЫЙ ФАЙЛ.

# Директория для поиска
SEARCH_DIR="./frontend"
# Имя выходного файла
OUTPUT_FILE="project_code.txt"

# Проверяем, существует ли директория
if [ ! -d "$SEARCH_DIR" ]; then
  echo "Ошибка: Директория '$SEARCH_DIR' не найдена."
  echo "Пожалуйста, запустите этот скрипт из корневой папки вашего проекта 'Orar-Usarb'."
  exit 1
fi

# Очищаем/создаем выходной файл и записываем в него заголовок
{
  echo "===================================================================="
  echo "========== НАЧАЛО ВЫВОДА КОДА ПРОЕКТА '$SEARCH_DIR' =========="
  echo "===================================================================="
  echo ""
} > "$OUTPUT_FILE" # > перезаписывает файл

# Используем find для поиска всех файлов с нужными расширениями,
# исключая директорию node_modules
find "$SEARCH_DIR" -type f \( -name "*.js" -o -name "*.ts" -o -name "*.jsx" -o -name "*.tsx" -o -name "*.json" -o -name "*.css" \) -not -path "*/node_modules/*" | while read -r file; do
  # Добавляем все в тот же файл
  {
    echo "--------------------------------------------------------------------"
    echo "--- Файл: $file"
    echo "--------------------------------------------------------------------"
    cat "$file"
    echo ""
    echo ""
  } >> "$OUTPUT_FILE" # >> добавляет в конец файла
done

# Добавляем финальный футер в файл
{
  echo "===================================================================="
  echo "========== ЗАВЕРШЕНИЕ ВЫВОДА КОДА ПРОЕКТА '$SEARCH_DIR' ========="
  echo "===================================================================="
} >> "$OUTPUT_FILE"

echo "Готово! Весь код проекта был успешно сохранен в файл: $OUTPUT_FILE"
echo "Пожалуйста, покажи мне содержимое этого файла."

